// i18n.ts - Internationalization support using Wikimedia jQuery i18n

// Define the type for message files
export type MessageFile = {
  [key: string]: string | { [key: string]: string }
}

// Define the type for the i18n context
export type I18nContext = {
  locale: string
  messages: { [locale: string]: MessageFile }
  setLocale: (locale: string) => void
  msg: (key: string, ...params: any[]) => string
}

// Available locales
export const AVAILABLE_LOCALES = [
  { code: "en", name: "English" },
  { code: "es", name: "Español" },
  { code: "fr", name: "Français" },
  { code: "de", name: "Deutsch" },
  { code: "it", name: "Italiano" },
  { code: "pt", name: "Português" },
  { code: "ru", name: "Русский" },
  { code: "zh", name: "中文" },
  { code: "ja", name: "日本語" },
  { code: "ar", name: "العربية" },
]

// Default locale
export const DEFAULT_LOCALE = "en"

// Message files for each locale
export const messages: { [locale: string]: MessageFile } = {
  en: {
    "app.title": "Wiki Leaderboard",
    "app.subtitle": "Project",
    "form.usernames": "Usernames",
    "form.usernames.placeholder": "user1, user2, user3",
    "form.startDate": "Start Date",
    "form.endDate": "End Date",
    "form.submit.single": "Check contributions",
    "form.submit.multiple": "Compare",
    "results.title": "Results from $1 - $2",
    "results.share": "Share",
    "results.export": "Export",
    "results.export.csv": "Export as CSV",
    "results.export.json": "Export as JSON",
    "results.contributions": "Contributions",
    "results.participants": "Participants",
    "results.average": "Average",
    "results.noData": "Results will be displayed here",
    "results.noResults": "No results for this user",
    "results.registered": "Registered",
    "results.editSummary": "Edit summary",
    "results.namespaceDistribution": "Namespace distribution",
    "results.topEdit": "Top edit",
    "chart.title": "Contributions over time",
    "chart.noData": "No chart data available",
    "chart.lineChart": "Line Chart",
    "chart.barChart": "Bar Chart",
    "chart.stackedBar": "Stacked Bar",
    "namespace.articles": "Articles",
    "share.title": "Share Results",
    "share.description": "Share these Wiki Leaderboard results with others",
    "share.link": "Link",
    "share.qrcode": "QR Code",
    "share.qrcode.description": "Scan this QR code to view the results",
    "share.copy": "Copy Link",
    "share.social": "Share on social media",
    "share.native": "Share",
    "footer.documentation": "Documentation",
    "footer.viewSource": "View source",
    "footer.reportIssue": "Report an issue",
    "footer.feedback": "Feedback",
    "footer.developedBy": "Developed by DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  es: {
    "app.title": "Tabla de Clasificación Wiki",
    "app.subtitle": "Proyecto",
    "form.usernames": "Nombres de usuario",
    "form.usernames.placeholder": "usuario1, usuario2, usuario3",
    "form.startDate": "Fecha de inicio",
    "form.endDate": "Fecha de fin",
    "form.submit.single": "Verificar contribuciones",
    "form.submit.multiple": "Comparar",
    "results.title": "Resultados del $1 - $2",
    "results.share": "Compartir",
    "results.export": "Exportar",
    "results.export.csv": "Exportar como CSV",
    "results.export.json": "Exportar como JSON",
    "results.contributions": "Contribuciones",
    "results.participants": "Participantes",
    "results.average": "Promedio",
    "results.noData": "Los resultados se mostrarán aquí",
    "results.noResults": "No hay resultados para este usuario",
    "results.registered": "Registrado",
    "results.editSummary": "Resumen de edición",
    "results.namespaceDistribution": "Distribución de espacios de nombres",
    "results.topEdit": "Edición principal",
    "chart.title": "Contribuciones a lo largo del tiempo",
    "chart.noData": "No hay datos de gráfico disponibles",
    "chart.lineChart": "Gráfico de líneas",
    "chart.barChart": "Gráfico de barras",
    "chart.stackedBar": "Barras apiladas",
    "namespace.articles": "Artículos",
    "share.title": "Compartir Resultados",
    "share.description": "Comparte estos resultados de Wiki Leaderboard con otros",
    "share.link": "Enlace",
    "share.qrcode": "Código QR",
    "share.qrcode.description": "Escanea este código QR para ver los resultados",
    "share.copy": "Copiar Enlace",
    "share.social": "Compartir en redes sociales",
    "share.native": "Compartir",
    "footer.documentation": "Documentación",
    "footer.viewSource": "Ver código fuente",
    "footer.reportIssue": "Reportar un problema",
    "footer.feedback": "Comentarios",
    "footer.developedBy": "Desarrollado por DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  fr: {
    "app.title": "Classement Wiki",
    "app.subtitle": "Projet",
    "form.usernames": "Noms d'utilisateur",
    "form.usernames.placeholder": "utilisateur1, utilisateur2, utilisateur3",
    "form.startDate": "Date de début",
    "form.endDate": "Date de fin",
    "form.submit.single": "Vérifier les contributions",
    "form.submit.multiple": "Comparer",
    "results.title": "Résultats du $1 - $2",
    "results.share": "Partager",
    "results.export": "Exporter",
    "results.export.csv": "Exporter en CSV",
    "results.export.json": "Exporter en JSON",
    "results.contributions": "Contributions",
    "results.participants": "Participants",
    "results.average": "Moyenne",
    "results.noData": "Les résultats seront affichés ici",
    "results.noResults": "Aucun résultat pour cet utilisateur",
    "results.registered": "Inscrit",
    "results.editSummary": "Résumé d'édition",
    "results.namespaceDistribution": "Distribution des espaces de noms",
    "results.topEdit": "Édition principale",
    "chart.title": "Contributions au fil du temps",
    "chart.noData": "Aucune donnée de graphique disponible",
    "chart.lineChart": "Graphique linéaire",
    "chart.barChart": "Graphique à barres",
    "chart.stackedBar": "Barres empilées",
    "namespace.articles": "Articles",
    "footer.documentation": "Documentation",
    "footer.viewSource": "Voir le code source",
    "footer.reportIssue": "Signaler un problème",
    "footer.feedback": "Commentaires",
    "footer.developedBy": "Développé par DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  de: {
    "app.title": "Wiki-Rangliste",
    "app.subtitle": "Projekt",
    "form.usernames": "Benutzernamen",
    "form.usernames.placeholder": "benutzer1, benutzer2, benutzer3",
    "form.startDate": "Startdatum",
    "form.endDate": "Enddatum",
    "form.submit.single": "Beiträge prüfen",
    "form.submit.multiple": "Vergleichen",
    "results.title": "Ergebnisse vom $1 - $2",
    "results.share": "Teilen",
    "results.export": "Exportieren",
    "results.export.csv": "Als CSV exportieren",
    "results.export.json": "Als JSON exportieren",
    "results.contributions": "Beiträge",
    "results.participants": "Teilnehmer",
    "results.average": "Durchschnitt",
    "results.noData": "Ergebnisse werden hier angezeigt",
    "results.noResults": "Keine Ergebnisse für diesen Benutzer",
    "results.registered": "Registriert",
    "results.editSummary": "Bearbeitungszusammenfassung",
    "results.namespaceDistribution": "Namensraumverteilung",
    "results.topEdit": "Top-Bearbeitung",
    "chart.title": "Beiträge im Zeitverlauf",
    "chart.noData": "Keine Diagrammdaten verfügbar",
    "chart.lineChart": "Liniendiagramm",
    "chart.barChart": "Balkendiagramm",
    "chart.stackedBar": "Gestapeltes Balkendiagramm",
    "namespace.articles": "Artikel",
    "footer.documentation": "Dokumentation",
    "footer.viewSource": "Quellcode anzeigen",
    "footer.reportIssue": "Problem melden",
    "footer.feedback": "Feedback",
    "footer.developedBy": "Entwickelt von DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  it: {
    "app.title": "Classifica Wiki",
    "app.subtitle": "Progetto",
    "form.usernames": "Nomi utente",
    "form.usernames.placeholder": "utente1, utente2, utente3",
    "form.startDate": "Data di inizio",
    "form.endDate": "Data di fine",
    "form.submit.single": "Verifica contributi",
    "form.submit.multiple": "Confronta",
    "results.title": "Risultati dal $1 - $2",
    "results.share": "Condividi",
    "results.export": "Esporta",
    "results.export.csv": "Esporta come CSV",
    "results.export.json": "Esporta come JSON",
    "results.contributions": "Contributi",
    "results.participants": "Partecipanti",
    "results.average": "Media",
    "results.noData": "I risultati verranno visualizzati qui",
    "results.noResults": "Nessun risultato per questo utente",
    "results.registered": "Registrato",
    "results.editSummary": "Riepilogo modifiche",
    "results.namespaceDistribution": "Distribuzione namespace",
    "results.topEdit": "Modifica principale",
    "chart.title": "Contributi nel tempo",
    "chart.noData": "Nessun dato grafico disponibile",
    "chart.lineChart": "Grafico a linee",
    "chart.barChart": "Grafico a barre",
    "chart.stackedBar": "Barre impilate",
    "namespace.articles": "Articoli",
    "footer.documentation": "Documentazione",
    "footer.viewSource": "Visualizza codice sorgente",
    "footer.reportIssue": "Segnala un problema",
    "footer.feedback": "Feedback",
    "footer.developedBy": "Sviluppato da DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  pt: {
    "app.title": "Classificação Wiki",
    "app.subtitle": "Projeto",
    "form.usernames": "Nomes de usuário",
    "form.usernames.placeholder": "usuário1, usuário2, usuário3",
    "form.startDate": "Data de início",
    "form.endDate": "Data de término",
    "form.submit.single": "Verificar contribuições",
    "form.submit.multiple": "Comparar",
    "results.title": "Resultados de $1 - $2",
    "results.share": "Compartilhar",
    "results.export": "Exportar",
    "results.export.csv": "Exportar como CSV",
    "results.export.json": "Exportar como JSON",
    "results.contributions": "Contribuições",
    "results.participants": "Participantes",
    "results.average": "Média",
    "results.noData": "Os resultados serão exibidos aqui",
    "results.noResults": "Nenhum resultado para este usuário",
    "results.registered": "Registrado",
    "results.editSummary": "Resumo de edição",
    "results.namespaceDistribution": "Distribuição de namespaces",
    "results.topEdit": "Edição principal",
    "chart.title": "Contribuições ao longo do tempo",
    "chart.noData": "Nenhum dado de gráfico disponível",
    "chart.lineChart": "Gráfico de linha",
    "chart.barChart": "Gráfico de barras",
    "chart.stackedBar": "Barras empilhadas",
    "namespace.articles": "Artigos",
    "footer.documentation": "Documentação",
    "footer.viewSource": "Ver código fonte",
    "footer.reportIssue": "Reportar um problema",
    "footer.feedback": "Comentários",
    "footer.developedBy": "Desenvolvido por DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  ru: {
    "app.title": "Рейтинг Wiki",
    "app.subtitle": "Проект",
    "form.usernames": "Имена пользователей",
    "form.usernames.placeholder": "пользователь1, пользователь2, пользователь3",
    "form.startDate": "Дата начала",
    "form.endDate": "Дата окончания",
    "form.submit.single": "Проверить вклад",
    "form.submit.multiple": "Сравнить",
    "results.title": "Результаты с $1 по $2",
    "results.share": "Поделиться",
    "results.export": "Экспорт",
    "results.export.csv": "Экспорт в CSV",
    "results.export.json": "Экспорт в JSON",
    "results.contributions": "Вклад",
    "results.participants": "Участники",
    "results.average": "Среднее",
    "results.noData": "Результаты будут отображены здесь",
    "results.noResults": "Нет результатов для этого пользователя",
    "results.registered": "Зарегистрирован",
    "results.editSummary": "Сводка правок",
    "results.namespaceDistribution": "Распределение по пространствам имён",
    "results.topEdit": "Главная правка",
    "chart.title": "Вклад с течением времени",
    "chart.noData": "Нет данных для графика",
    "chart.lineChart": "Линейный график",
    "chart.barChart": "Столбчатый график",
    "chart.stackedBar": "Накопительный график",
    "namespace.articles": "Статьи",
    "footer.documentation": "Документация",
    "footer.viewSource": "Посмотреть исходный код",
    "footer.reportIssue": "Сообщить о проблеме",
    "footer.feedback": "Обратная связь",
    "footer.developedBy": "Разработано DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
  zh: {
    "app.title": "维基排行榜",
    "app.subtitle": "项目",
    "form.usernames": "用户名",
    "form.usernames.placeholder": "用户1, 用户2, 用户3",
    "form.startDate": "开始日期",
    "form.endDate": "结束日期",
    "form.submit.single": "检查贡献",
    "form.submit.multiple": "比较",
    "results.title": "从 $1 到 $2 的结果",
    "results.share": "分享",
    "results.export": "导出",
    "results.export.csv": "导出为CSV",
    "results.export.json": "导出为JSON",
    "results.contributions": "贡献",
    "results.participants": "参与者",
    "results.average": "平均",
    "results.noData": "结果将显示在这里",
    "results.noResults": "该用户没有结果",
    "results.registered": "注册时间",
    "results.editSummary": "编辑摘要",
    "results.namespaceDistribution": "命名空间分布",
    "results.topEdit": "最佳编辑",
    "chart.title": "随时间的贡献",
    "chart.noData": "没有可用的图表数据",
    "chart.lineChart": "折线图",
    "chart.barChart": "柱状图",
    "chart.stackedBar": "堆叠柱状图",
    "namespace.articles": "文章",
    "footer.documentation": "文档",
    "footer.viewSource": "查看源代码",
    "footer.reportIssue": "报告问题",
    "footer.feedback": "反馈",
    "footer.developedBy": "由DYG开发",
    "footer.copyright": "Daniel Yepez Garces",
  },
  ja: {
    "app.title": "ウィキリーダーボード",
    "app.subtitle": "プロジェクト",
    "form.usernames": "ユーザー名",
    "form.usernames.placeholder": "ユーザー1, ユーザー 2, ユーザー3",
    "form.startDate": "開始日",
    "form.endDate": "終了日",
    "form.submit.single": "貢献を確認",
    "form.submit.multiple": "比較",
    "results.title": "$1 から $2 までの結果",
    "results.share": "共有",
    "results.export": "エクスポート",
    "results.export.csv": "CSVとしてエクスポート",
    "results.export.json": "JSONとしてエクスポート",
    "results.contributions": "貢献",
    "results.participants": "参加者",
    "results.average": "平均",
    "results.noData": "結果はここに表示されます",
    "results.noResults": "このユーザーの結果はありません",
    "results.registered": "登録日",
    "results.editSummary": "編集の要約",
    "results.namespaceDistribution": "名前空間の分布",
    "results.topEdit": "トップ編集",
    "chart.title": "時間経過による貢献",
    "chart.noData": "グラフデータがありません",
    "chart.lineChart": "折れ線グラフ",
    "chart.barChart": "棒グラフ",
    "chart.stackedBar": "積み上げ棒グラフ",
    "namespace.articles": "記事",
    "footer.documentation": "ドキュメント",
    "footer.viewSource": "ソースコードを表示",
    "footer.reportIssue": "問題を報告",
    "footer.feedback": "フィードバック",
    "footer.developedBy": "DYGによって開発",
    "footer.copyright": "Daniel Yepez Garces",
  },
  ar: {
    "app.title": "لوحة صدارة الويكي",
    "app.subtitle": "المشروع",
    "form.usernames": "أسماء المستخدمين",
    "form.usernames.placeholder": "مستخدم1، مستخدم2، مستخدم3",
    "form.startDate": "تاريخ البدء",
    "form.endDate": "تاريخ الانتهاء",
    "form.submit.single": "التحقق من المساهمات",
    "form.submit.multiple": "مقارنة",
    "results.title": "النتائج من $1 - $2",
    "results.share": "مشاركة",
    "results.export": "تصدير",
    "results.export.csv": "تصدير كملف CSV",
    "results.export.json": "تصدير كملف JSON",
    "results.contributions": "المساهمات",
    "results.participants": "المشاركون",
    "results.average": "المتوسط",
    "results.noData": "ستظهر النتائج هنا",
    "results.noResults": "لا توجد نتائج لهذا المستخدم",
    "results.registered": "مسجل",
    "results.editSummary": "ملخص التعديل",
    "results.namespaceDistribution": "توزيع النطاقات",
    "results.topEdit": "أهم تعديل",
    "chart.title": "المساهمات عبر الزمن",
    "chart.noData": "لا تتوفر بيانات الرسم البياني",
    "chart.lineChart": "رسم بياني خطي",
    "chart.barChart": "رسم بياني شريطي",
    "chart.stackedBar": "رسم بياني شريطي متراكم",
    "namespace.articles": "المقالات",
    "footer.documentation": "التوثيق",
    "footer.viewSource": "عرض المصدر",
    "footer.reportIssue": "الإبلاغ عن مشكلة",
    "footer.feedback": "تعليقات",
    "footer.developedBy": "طور بواسطة DYG",
    "footer.copyright": "Daniel Yepez Garces",
  },
}

// Function to format messages with parameters
export function formatMessage(message: string, ...params: any[]): string {
  return params.reduce((msg, param, index) => {
    return msg.replace(`$${index + 1}`, param)
  }, message)
}

// Create a default i18n context
export const createI18nContext = (initialLocale: string = DEFAULT_LOCALE): I18nContext => {
  let locale = initialLocale

  // Function to get a message by key
  const msg = (key: string, ...params: any[]): string => {
    const messageFile = messages[locale] || messages[DEFAULT_LOCALE]
    const message = messageFile[key] || key

    if (typeof message === "string") {
      return formatMessage(message, ...params)
    }

    return key
  }

  // Function to set the locale
  const setLocale = (newLocale: string): void => {
    if (messages[newLocale]) {
      locale = newLocale
    } else {
      console.warn(`Locale ${newLocale} not available, using ${locale}`)
    }
  }

  return {
    locale,
    messages,
    setLocale,
    msg,
  }
}

